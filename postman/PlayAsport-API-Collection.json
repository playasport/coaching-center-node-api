{
  "info": {
    "name": "PlayAsport Academy API",
    "description": "API collection for PlayAsport Academy backend with Booking, Payment, Academy Management, and Student Management endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.1.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api/v1",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Booking",
      "item": [
        {
          "name": "Get Booking Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/booking/summary?batchId=:batchId&participantIds=:participantId1,:participantId2",
              "host": ["{{baseUrl}}"],
              "path": ["user", "booking", "summary"],
              "query": [
                {
                  "key": "batchId",
                  "value": ":batchId",
                  "description": "Batch ID (ObjectId)"
                },
                {
                  "key": "participantIds",
                  "value": ":participantId1,:participantId2",
                  "description": "Comma-separated Participant IDs (e.g., id1,id2,id3)"
                }
              ]
            },
            "description": "Get booking summary including batch details, participant info, and calculated amount before creating an order."
          },
          "response": []
        },
        {
          "name": "Create Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"batchId\": \"507f1f77bcf86cd799439011\",\n  \"participantIds\": [\"507f1f77bcf86cd799439012\", \"507f1f77bcf86cd799439013\"],\n  \"notes\": \"Optional booking notes\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/user/booking/order",
              "host": ["{{baseUrl}}"],
              "path": ["user", "booking", "order"]
            },
            "description": "Create a Razorpay payment order and booking record. Returns booking details and Razorpay order information."
          },
          "response": []
        },
        {
          "name": "Verify Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"razorpay_order_id\": \"order_1234567890\",\n  \"razorpay_payment_id\": \"pay_1234567890\",\n  \"razorpay_signature\": \"signature_from_razorpay\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/user/booking/verify-payment",
              "host": ["{{baseUrl}}"],
              "path": ["user", "booking", "verify-payment"]
            },
            "description": "Verify Razorpay payment signature and update booking status. Use this after successful payment on frontend."
          },
          "response": []
        }
      ],
      "description": "Booking and payment management endpoints"
    },
    {
      "name": "Webhook",
      "item": [
        {
          "name": "Razorpay Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Razorpay-Signature",
                "value": "webhook_signature_from_razorpay",
                "type": "text",
                "description": "Razorpay webhook signature for verification"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"entity\": \"event\",\n  \"account_id\": \"acc_1234567890\",\n  \"event\": \"payment.captured\",\n  \"contains\": [\"payment\"],\n  \"payload\": {\n    \"payment\": {\n      \"entity\": {\n        \"id\": \"pay_1234567890\",\n        \"entity\": \"payment\",\n        \"amount\": 500000,\n        \"currency\": \"INR\",\n        \"status\": \"captured\",\n        \"order_id\": \"order_1234567890\",\n        \"method\": \"card\",\n        \"captured\": true,\n        \"email\": \"user@example.com\",\n        \"contact\": \"9876543210\",\n        \"created_at\": 1234567890\n      }\n    }\n  },\n  \"created_at\": 1234567890\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/webhook/razorpay",
              "host": ["{{baseUrl}}"],
              "path": ["webhook", "razorpay"]
            },
            "description": "Webhook endpoint for Razorpay payment events. Automatically verifies payments and updates booking status. Called by Razorpay when payment events occur."
          },
          "response": []
        }
      ],
      "description": "Webhook endpoints for payment verification"
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "User Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"Password@123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/user/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["user", "auth", "login"]
            },
            "description": "Login endpoint to get access token. Save the accessToken from response to use in other requests."
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints"
    },
    {
      "name": "Academy",
      "item": [
        {
          "name": "Get All Academies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/academies?page=1&limit=10&latitude=28.6139&longitude=77.209",
              "host": ["{{baseUrl}}"],
              "path": ["academies"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of records per page (default: 10, max: 100)"
                },
                {
                  "key": "latitude",
                  "value": "28.6139",
                  "description": "User's latitude (optional, for distance-based sorting)",
                  "disabled": true
                },
                {
                  "key": "longitude",
                  "value": "77.209",
                  "description": "User's longitude (optional, for distance-based sorting)",
                  "disabled": true
                }
              ]
            },
            "description": "Get all published academies with pagination. If location (latitude, longitude) is provided, academies are sorted by distance (nearest first). If user is logged in and has favorite sports, academies with favorite sports are prioritized. This is an unprotected route (authentication is optional)."
          },
          "response": []
        },
        {
          "name": "Get Academy by User ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/academy/:userId",
              "host": ["{{baseUrl}}"],
              "path": ["academy", ":userId"],
              "variable": [
                {
                  "key": "userId",
                  "value": "f316a86c-2909-4d32-8983-eb225c715bcb",
                  "description": "User's custom ID (academy owner's user ID)"
                }
              ]
            },
            "description": "Get detailed information about an academy including all batches. If user is not logged in, email and mobile number will be masked. This is an unprotected route (authentication is optional)."
          },
          "response": []
        },
        {
          "name": "Get Academies by City",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/city/:cityName?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["city", ":cityName"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of records per page (default: 10, max: 100)"
                }
              ],
              "variable": [
                {
                  "key": "cityName",
                  "value": "New Delhi",
                  "description": "City name (case-insensitive)"
                }
              ]
            },
            "description": "Get list of academies in a specific city. This is an unprotected route."
          },
          "response": []
        },
        {
          "name": "Get Academies by Sport",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sport/:slug?page=1&limit=10&lat=28.6139&lon=77.209",
              "host": ["{{baseUrl}}"],
              "path": ["sport", ":slug"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of records per page (default: 10, max: 100)"
                },
                {
                  "key": "latitude",
                  "value": "28.6139",
                  "description": "User's latitude (optional, for distance-based sorting)",
                  "disabled": true
                },
                {
                  "key": "longitude",
                  "value": "77.209",
                  "description": "User's longitude (optional, for distance-based sorting)",
                  "disabled": true
                }
              ],
              "variable": [
                {
                  "key": "slug",
                  "value": "cricket",
                  "description": "Sport slug (e.g., 'cricket', 'football')"
                }
              ]
            },
            "description": "Get academies that offer a specific sport. If location (latitude, longitude) is provided, academies are sorted by distance (nearest first) and distance is shown in km. This is an unprotected route (authentication is optional)."
          },
          "response": []
        }
      ],
      "description": "Public academy endpoints for browsing and searching academies"
    },
    {
      "name": "Home",
      "item": [
        {
          "name": "Get Home Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/home?latitude=28.6139&longitude=77.209",
              "host": ["{{baseUrl}}"],
              "path": ["home"],
              "query": [
                {
                  "key": "lat",
                  "value": "28.6139",
                  "description": "User's latitude (optional, for nearby academies)",
                  "disabled": true
                },
                {
                  "key": "lon",
                  "value": "77.209",
                  "description": "User's longitude (optional, for nearby academies)",
                  "disabled": true
                }
              ]
            },
            "description": "Get home page data including nearby academies (up to 12, sorted by distance) and 8 popular sports. If location (latitude, longitude) is provided, nearby academies are shown. If user is logged in and has favorite sports, academies with favorite sports are prioritized. This is an unprotected route (authentication is optional)."
          },
          "response": []
        }
      ],
      "description": "Home page data endpoints"
    },
    {
      "name": "User Profile",
      "item": [
        {
          "name": "Update Favorite Sports",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"favoriteSports\": [\n    \"507f1f77bcf86cd799439011\",\n    \"507f1f77bcf86cd799439012\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/user/auth/favorite-sports",
              "host": ["{{baseUrl}}"],
              "path": ["user", "auth", "favorite-sports"]
            },
            "description": "Update user's favorite sports. Array of Sport ObjectIds. This is a protected route (requires authentication)."
          },
          "response": []
        }
      ],
      "description": "User profile management endpoints"
    },
    {
      "name": "Academy Management",
      "item": [
        {
          "name": "Academy Booking",
          "item": [
            {
              "name": "Get Academy Bookings",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/academy/booking?page=1&limit=10&centerId=&batchId=&status=&paymentStatus=",
                  "host": ["{{baseUrl}}"],
                  "path": ["academy", "booking"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1",
                      "description": "Page number (starts from 1)",
                      "disabled": true
                    },
                    {
                      "key": "limit",
                      "value": "10",
                      "description": "Number of records per page (max: 100)",
                      "disabled": true
                    },
                    {
                      "key": "centerId",
                      "value": "",
                      "description": "Filter by coaching center ID",
                      "disabled": true
                    },
                    {
                      "key": "batchId",
                      "value": "",
                      "description": "Filter by batch ID",
                      "disabled": true
                    },
                    {
                      "key": "status",
                      "value": "",
                      "description": "Filter by booking status (pending, confirmed, cancelled, completed)",
                      "disabled": true
                    },
                    {
                      "key": "paymentStatus",
                      "value": "",
                      "description": "Filter by payment status (pending, processing, success, failed, refunded, cancelled)",
                      "disabled": true
                    }
                  ]
                },
                "description": "Retrieve a paginated list of bookings for coaching centers owned by the authenticated academy user. Requires authentication and ACADEMY role."
              },
              "response": []
            },
            {
              "name": "Get Academy Booking by ID",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/academy/booking/:id",
                  "host": ["{{baseUrl}}"],
                  "path": ["academy", "booking", ":id"],
                  "variable": [
                    {
                      "key": "id",
                      "value": "f316a86c-2909-4d32-8983-eb225c715bcb",
                      "description": "Booking UUID"
                    }
                  ]
                },
                "description": "Retrieve a booking by its ID. The booking must belong to one of the academy's coaching centers. Requires authentication and ACADEMY role."
              },
              "response": []
            },
            {
              "name": "Update Academy Booking Status",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"confirmed\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/academy/booking/:id/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["academy", "booking", ":id", "status"],
                  "variable": [
                    {
                      "key": "id",
                      "value": "f316a86c-2909-4d32-8983-eb225c715bcb",
                      "description": "Booking UUID"
                    }
                  ]
                },
                "description": "Update the status of a booking. The booking must belong to one of the academy's coaching centers. Status values: pending, confirmed, cancelled, completed. Requires authentication and ACADEMY role."
              },
              "response": []
            }
          ],
          "description": "Academy booking management endpoints for viewing and managing bookings"
        },
        {
          "name": "Academy Student",
          "item": [
            {
              "name": "Get Enrolled Students",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/academy/my-student?page=1&limit=10&centerId=&batchId=&status=",
                  "host": ["{{baseUrl}}"],
                  "path": ["academy", "my-student"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1",
                      "description": "Page number (starts from 1)",
                      "disabled": true
                    },
                    {
                      "key": "limit",
                      "value": "10",
                      "description": "Number of records per page (max: 100)",
                      "disabled": true
                    },
                    {
                      "key": "centerId",
                      "value": "",
                      "description": "Filter by coaching center ID",
                      "disabled": true
                    },
                    {
                      "key": "batchId",
                      "value": "",
                      "description": "Filter by batch ID",
                      "disabled": true
                    },
                    {
                      "key": "status",
                      "value": "",
                      "description": "Filter by overall student status (active, left, completed, pending)",
                      "disabled": true
                    }
                  ]
                },
                "description": "Retrieve a paginated list of enrolled students grouped by participant (no duplicates). Shows student details including current age (calculated from DOB), batch name, sport name, booking status, and payment status for each enrollment. Requires authentication and ACADEMY role."
              },
              "response": []
            },
            {
              "name": "Get Enrolled Student Detail",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/academy/my-student/:participantId",
                  "host": ["{{baseUrl}}"],
                  "path": ["academy", "my-student", ":participantId"],
                  "variable": [
                    {
                      "key": "participantId",
                      "value": "507f1f77bcf86cd799439011",
                      "description": "Participant ID (ObjectId)"
                    }
                  ]
                },
                "description": "Retrieve comprehensive details about a specific enrolled student including all participant information (with age), complete user details, all batches with full batch information (scheduled timings, duration, capacity, fee structure), sport details, coaching center basic information (name, contact, location), and complete booking details (status, payment info, notes, timestamps). Requires authentication and ACADEMY role."
              },
              "response": []
            }
          ],
          "description": "Academy student management endpoints for viewing enrolled students"
        }
      ],
      "description": "Academy management endpoints for booking and student management. Requires ACADEMY role authentication."
    }
  ]
}

